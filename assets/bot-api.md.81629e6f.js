import{_ as o,c as a,a as e,b as s,d as l,o as n}from"./app.712e3291.js";const B=JSON.parse('{"title":"Bot 开放平台","description":"","frontmatter":{},"headers":[{"level":2,"title":"接收 / On","slug":"接收-on","link":"#接收-on","children":[{"level":3,"title":"reject_join","slug":"reject-join","link":"#reject-join","children":[]},{"level":3,"title":"server_info","slug":"server-info","link":"#server-info","children":[]},{"level":3,"title":"connect","slug":"connect","link":"#connect","children":[]},{"level":3,"title":"set_player_id","slug":"set-player-id","link":"#set-player-id","children":[]},{"level":3,"title":"room_message","slug":"room-message","link":"#room-message","children":[]},{"level":3,"title":"game_started","slug":"game-started","link":"#game-started","children":[]},{"level":3,"title":"game_update","slug":"game-update","link":"#game-update","children":[]},{"level":3,"title":"attack_failure","slug":"attack-failure","link":"#attack-failure","children":[]},{"level":3,"title":"game_over","slug":"game-over","link":"#game-over","children":[]},{"level":3,"title":"game_ended","slug":"game-ended","link":"#game-ended","children":[]}]},{"level":2,"title":"发送 / Emit","slug":"发送-emit","link":"#发送-emit","children":[{"level":3,"title":"query_server_info","slug":"query-server-info","link":"#query-server-info","children":[]},{"level":3,"title":"set_username","slug":"set-username","link":"#set-username","children":[]},{"level":3,"title":"player_message","slug":"player-message","link":"#player-message","children":[]},{"level":3,"title":"attack","slug":"attack","link":"#attack","children":[]}]}],"relativePath":"bot-api.md","lastUpdated":1672653439000}'),t={name:"bot-api.md"},r=l('<h1 id="bot-开放平台" tabindex="-1">Bot 开放平台 <a class="header-anchor" href="#bot-开放平台" aria-hidden="true">#</a></h1><p>本文介绍 Gennia 的 <code>socket API</code>。以便开发者造出相应的游戏机器人。</p><h2 id="接收-on" tabindex="-1">接收 / <code>On</code> <a class="header-anchor" href="#接收-on" aria-hidden="true">#</a></h2><h3 id="reject-join" tabindex="-1"><code>reject_join</code> <a class="header-anchor" href="#reject-join" aria-hidden="true">#</a></h3><p>加入房间申请被拒绝。</p><p>含有两个参数：<code>title, message</code>，为拒绝理由（Gennia 只设计了一个玩家队列，不允许在游戏开始后加入房间）。</p><h3 id="server-info" tabindex="-1"><code>server_info</code> <a class="header-anchor" href="#server-info" aria-hidden="true">#</a></h3><p>服务器信息，含两个参数：<code>name, version</code>。分别为服务器名，版本号。通过发送 <code>query_server_info</code> 获取。</p><h3 id="connect" tabindex="-1"><code>connect</code> <a class="header-anchor" href="#connect" aria-hidden="true">#</a></h3><p>连接到服务器房间。</p><h3 id="set-player-id" tabindex="-1"><code>set_player_id</code> <a class="header-anchor" href="#set-player-id" aria-hidden="true">#</a></h3><p>含一个参数，为在加入房间后 Gennia 向你提供的 <code>playerId</code>。供断线重连使用。（<strong>该功能未完善</strong>）</p><h3 id="room-message" tabindex="-1"><code>room_message</code> <a class="header-anchor" href="#room-message" aria-hidden="true">#</a></h3><p>接收系统/玩家发布的聊天信息。</p><h3 id="game-started" tabindex="-1"><code>game_started</code> <a class="header-anchor" href="#game-started" aria-hidden="true">#</a></h3>',15),p=e("code",null,"playerColor",-1),c={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},i={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"-0.566ex"},xmlns:"http://www.w3.org/2000/svg",width:"7.04ex",height:"2.262ex",role:"img",focusable:"false",viewBox:"0 -750 3111.6 1000","aria-hidden":"true"},d=l('<g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mo"><path data-c="28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z" style="stroke-width:3;"></path></g><g data-mml-node="mn" transform="translate(389,0)"><path data-c="30" d="M96 585Q152 666 249 666Q297 666 345 640T423 548Q460 465 460 320Q460 165 417 83Q397 41 362 16T301 -15T250 -22Q224 -22 198 -16T137 16T82 83Q39 165 39 320Q39 494 96 585ZM321 597Q291 629 250 629Q208 629 178 597Q153 571 145 525T137 333Q137 175 145 125T181 46Q209 16 250 16Q290 16 318 46Q347 76 354 130T362 333Q362 478 354 524T321 597Z" style="stroke-width:3;"></path></g><g data-mml-node="mo" transform="translate(1166.8,0)"><path data-c="223C" d="M55 166Q55 241 101 304T222 367Q260 367 296 349T362 304T421 252T484 208T554 189Q616 189 655 236T694 338Q694 350 698 358T708 367Q722 367 722 334Q722 260 677 197T562 134H554Q517 134 481 152T414 196T355 248T292 293T223 311Q179 311 145 286Q109 257 96 218T80 156T69 133Q55 133 55 166Z" style="stroke-width:3;"></path></g><g data-mml-node="mn" transform="translate(2222.6,0)"><path data-c="37" d="M55 458Q56 460 72 567L88 674Q88 676 108 676H128V672Q128 662 143 655T195 646T364 644H485V605L417 512Q408 500 387 472T360 435T339 403T319 367T305 330T292 284T284 230T278 162T275 80Q275 66 275 52T274 28V19Q270 2 255 -10T221 -22Q210 -22 200 -19T179 0T168 40Q168 198 265 368Q285 400 349 489L395 552H302Q128 552 119 546Q113 543 108 522T98 479L95 458V455H55V458Z" style="stroke-width:3;"></path></g><g data-mml-node="mo" transform="translate(2722.6,0)"><path data-c="29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z" style="stroke-width:3;"></path></g></g></g>',1),h=[d],m=e("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[e("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[e("mo",{stretchy:"false"},"("),e("mn",null,"0"),e("mo",null,"∼"),e("mn",null,"7"),e("mo",{stretchy:"false"},")")])],-1),u=l(`<h3 id="game-update" tabindex="-1"><code>game_update</code> <a class="header-anchor" href="#game-update" aria-hidden="true">#</a></h3><p>游戏更新。每个游戏刻都会下传。参数列表：</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#A6ACCD;">gameMap</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> width</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> height</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> turn</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> leaderBoard</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="width-与-height" tabindex="-1"><code>width</code> 与 <code>height</code> <a class="header-anchor" href="#width-与-height" aria-hidden="true">#</a></h4><p>与原含义颠倒。<code>width</code> 代表竖向格子数，<code>height</code> 代表横向格子数。</p><h4 id="gamemap-数据结构" tabindex="-1"><code>gameMap</code> 数据结构 <a class="header-anchor" href="#gamemap-数据结构" aria-hidden="true">#</a></h4><p><code>String</code> 化的二维 <code>Array</code>。使用时需用 <code>JSON.parse()</code> 方式还原。</p><h4 id="leaderboard-数据结构" tabindex="-1"><code>leaderBoard</code> 数据结构 <a class="header-anchor" href="#leaderboard-数据结构" aria-hidden="true">#</a></h4><p>一维 <code>Array</code>。拥有如下属性：</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">color</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">username</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">land</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">army</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="attack-failure" tabindex="-1"><code>attack_failure</code> <a class="header-anchor" href="#attack-failure" aria-hidden="true">#</a></h3><p>你发送的上一条 <code>attack</code> 请求不满足要求。</p><h3 id="game-over" tabindex="-1"><code>game_over</code> <a class="header-anchor" href="#game-over" aria-hidden="true">#</a></h3><p>含一个参数：<code>player</code>，表示你被该玩家攻占。通常需要与 <code>leave_game</code> 配合使用。</p><p><code>player</code> 为 <code>player Class</code>。</p><p>一个 <code>player Class</code> 含有以下属性：</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">id</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">id</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">socket_id</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">socket_id</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">username</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">username</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">color</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">color</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">isRoomHost</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">isRoomHost</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">forceStart</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">forceStart</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">isDead</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">isDead</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">operatedTurn</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">operatedTurn</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="game-ended" tabindex="-1"><code>game_ended</code> <a class="header-anchor" href="#game-ended" aria-hidden="true">#</a></h3><p>整场游戏结束。含一个参数：<code>player</code>，表示最后赢家。</p><h2 id="发送-emit" tabindex="-1">发送 / <code>Emit</code> <a class="header-anchor" href="#发送-emit" aria-hidden="true">#</a></h2><h3 id="query-server-info" tabindex="-1"><code>query_server_info</code> <a class="header-anchor" href="#query-server-info" aria-hidden="true">#</a></h3><p>向 Gennia 请求服务器信息。服务器会返回 <code>server_info</code>。</p><h3 id="set-username" tabindex="-1"><code>set_username</code> <a class="header-anchor" href="#set-username" aria-hidden="true">#</a></h3><p>这个是你愿意加入游戏的标志。</p><p>发送一个参数 <code>username</code>（可以与他人重复）。发送后您会接收到 <code>set_player_id</code>。就是您的 <code>playerId</code>。</p><h3 id="player-message" tabindex="-1"><code>player_message</code> <a class="header-anchor" href="#player-message" aria-hidden="true">#</a></h3><p>发送一个参数 <code>message</code>。</p><blockquote><p><strong>注意</strong>：您只能在游戏<strong>开始前</strong>发送聊天请求</p></blockquote><h3 id="attack" tabindex="-1"><code>attack</code> <a class="header-anchor" href="#attack" aria-hidden="true">#</a></h3><p>需要包含三个参数：</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">from</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Point</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">to</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Point</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">half</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Boolean</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>其中 <code>Point</code> 类含两个属性：<code>x, y</code>。</p><p><code>half</code> 代表你是否希望进行半数攻击。</p>`,33),y=e("strong",null,"注意",-1),F={class:"MathJax",jax:"SVG",style:{direction:"ltr",position:"relative"}},g={style:{overflow:"visible","min-height":"1px","min-width":"1px","vertical-align":"0"},xmlns:"http://www.w3.org/2000/svg",width:"1.131ex",height:"1.507ex",role:"img",focusable:"false",viewBox:"0 -666 500 666","aria-hidden":"true"},_=e("g",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",transform:"scale(1,-1)"},[e("g",{"data-mml-node":"math"},[e("g",{"data-mml-node":"mn"},[e("path",{"data-c":"31",d:"M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z",style:{"stroke-width":"3"}})])])],-1),D=[_],b=e("mjx-assistive-mml",{unselectable:"on",display:"inline",style:{top:"0px",left:"0px",clip:"rect(1px, 1px, 1px, 1px)","-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none",position:"absolute",padding:"1px 0px 0px 0px",border:"0px",display:"block",width:"auto",overflow:"hidden"}},[e("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[e("mn",null,"1")])],-1),T=e("code",null,"attack_failure",-1);function v(f,C,x,k,Q,A){return n(),a("div",null,[r,e("p",null,[s("含一个参数："),p,s("，为你的颜色代号 "),e("mjx-container",c,[(n(),a("svg",i,h)),m]),s(" 。")]),u,e("blockquote",null,[e("p",null,[y,s("：您 "),e("mjx-container",F,[(n(),a("svg",g,D)),b]),s(" 游戏刻内只能进行一次攻击。后面几次 Gennia 不会接收，而是返回 "),T,s("。")])])])}const j=o(t,[["render",v]]);export{B as __pageData,j as default};
